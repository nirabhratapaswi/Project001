<!DOCTYPE html>
<html>
  <head>
    <title>Mails</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <style>
      #id001 {
        color: red;
      }
      #p011 {
        display: none;
      }
      .hide {
        visibility: none;
      }
    </style>
  </head>
  <body>
    <p id="p011"></p>
    <div id="notice">
      <% if(notice) %>
        <p><%= notice; %></p>
    </div>
    <nav class="navbar navbar-inverse">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">C-mail</a>
        </div>
        <div class="collapse navbar-collapse" id="myNavbar">
          <ul class="nav navbar-nav">
            <li class="active"><a href="/auth">Inbox</a></li>
            <li><a href="/Email/sentmail">Sent Mail</a></li>
            <li><a href="/">Spam Mail</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/logout"><span class="glyphicon glyphicon-log-out"></span> Logout</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <table class="table table-striped">
      <thead>
      <tr>
        <th>Sender</th>
        <th>Subject</th>
        <th>Body</th>
        <th>Date</th>
      </tr>
    </thead>
    <tbody id="mailshow">
        <% for(var i = 0; i < mails.length; i++) { %>
          <tr>
            <td><%= mails[i].SenderName %></td>
            <td><%= mails[i].Subject %></td>
            <td><%= mails[i].Body %></td>
            <td><%= mails[i].Time %></td>
            <td class='hide'><%= mails[i].id %></td>
            <td>Delete</td>
            <!--<td><a href="#" onclick="#">Delete</a></td>-->
          </tr>
        <% } %>
    </tbody>
    </table>
    <p>Logged in as: <% if(username) %><%= username; %></p>
    <!--<button class="btn btn-info"><a href="/Email/createmail">Create Mail</button>-->



    <!-- Trigger the modal with a button -->
  			<button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal" data-backdrop="static" id="compose_mail_btn">Compose Mail</button>

  			<!-- Modal -->
  			<div class="modal fade" id="myModal" role="dialog">
    			<div class="modal-dialog modal-lg">

      			<!-- Modal content-->
      			<div class="modal-content">
        				<div class="modal-header">
          				<button type="button" class="close" data-dismiss="modal">&times;</button>
          				<h4 class="modal-title">Mail It!!</h4>
        				</div>

                <!-- ---- -->
                <!-- Form body -->

        				<div class="modal-body">
          				<form role="form" action="./Email/sendmail" method="post" id="mail_form" encType="multipart/form-data">
        						<div class="form-group">
          						<label for="username">:Receiver Roll</label>
          						<div class="col-sm-8">
            						<input type="number" class="form-control" id="receiver" name="receiver">
          						</div>
        						</div>
        						<div class="form-group">
          						<label for="username">:Subject</label>
          						<div class="col-sm-8">
            						<input type="text" class="form-control" id="subject" name="subject">
          						</div>
        						</div>
        						<div class="form-group">
        						  <label for="bodytext">:Body</label>
        						  <div class="col-sm-8">
          						  <textarea class="form-control" id="bodytext" name="bodytext" rows="3"></textarea>
         						   <!--<input type="text" class="form-control" id="bodytext" name="bodytext">-->
          						</div>
        						</div>
                    <br>
                    <br>
                    <input type="file" style="display: none;" id="input_file" name="attachment">
                    <button type="button" class="btn btn-info" id="file_button">
                      <span class="glyphicon glyphicon-paperclip"></span>
                    </button>
                    <br>
        						<button type="submit" class="btn btn-info pull-right">Send</button>
                    <!--<button onclick="form_submit()" class="btn btn-info">Send</button>-->
      					  </form>
        				</div>
                <br><br>
                <!-- ---- -->
                <!-- Form footer -->

        				<div class="modal-footer">
          				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        				</div>

                <!-- ---- -->

      			</div>

    			</div>
  			</div>







  </body>
  <script type="text/javascript">
    function form_submit() {
      document.getElementById("mail_form").submit();
     }
     /*$(document).ready(function(){
       $("#compose_mail_btn").click(function(){
         $("#myModal").modal({backdrop: "static"});
       });
     });*/
     $('#file_button').click(function(){
       $('#input_file').click();
     });
  </script>
  <script type="text/javascript" src="/javascripts/mail.js"></script>
</html>
